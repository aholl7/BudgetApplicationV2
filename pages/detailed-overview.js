import Head from "next/head"
import { useContext } from "react";
import { auth } from "../js/firebase.js";
import { 
    Box, 
    Grid, 
    GridItem, 
    useColorMode, 
    useColorModeValue, 
    Button, 
    IconButton,
    Text
} from "@chakra-ui/react";
import NavBar from "../components/NavBar2";
import { HamburgerIcon, MoonIcon } from '@chakra-ui/icons';
import DashSection from "../components/DashSection";
import MobileNavBar from "../components/MobileNavBar";
import DetailsTable from "../components/DetailsTable.js";
import AuthRoute from "../authentication/AuthRoute";
import { AuthContext } from "../authentication/AuthContext.js";

const Overview = () => {
    const { userInfo } = useContext(AuthContext);

    const { colorMode, toggleColorMode } = useColorMode();

    const bgNav = useColorModeValue('white', 'gray.900');
    const bg = useColorModeValue('gray.200', 'gray.800');
    const navColor = useColorModeValue('gray.400', 'white');
    const color = useColorModeValue('#221266', 'white');
   
    return (
        <AuthRoute>
            <Box>
                <Head>
                    <title>Overview</title>
                    <meta name="description" content="Generated by create next app" />
                    <link rel="icon" href="/favicon.ico" />
                </Head>
    
                <main style={{position: "relative"}}>
                <Grid templateColumns='repeat(5, 1fr)' gap={0}>
                    <GridItem colSpan={1} display={{base: "none", md: "block"}} h="100vh" bg={bgNav}>
                        <NavBar bg={bgNav} color={navColor} colorMode={colorMode}/>
                    </GridItem>
                    <GridItem colSpan={{base: 5, md: 4}}  h="100vh" bg={bg} overflowY="scroll">
                        <Box>
                            <Box 
                                float="right" 
                                marginTop="20px" 
                                marginRight="40px" 
                                display={{base: "none", md: "block"}}
                            >
                                <IconButton
                                    color={colorMode === 'light' ? 'gray.400' : 'white'}
                                    icon={<MoonIcon />}
                                    onClick={toggleColorMode}
                                    fontSize="20px"
                                    display={{base: "none", md: "block"}}
                                    
                                />
                                
                            </Box>
                            <MobileNavBar colorMode={colorMode} enableDark={toggleColorMode}/>
                        </Box>
                        <Box marginTop={{base: "38px", md:"65px"}} marginLeft="auto" marginRight="auto" width="95%" m>
                            <Text fontSize='3xl' fontWeight="bold" color={color}>Overview</Text>

                            <Box marginTop="40px">
                                <DetailsTable 
                                    uid={userInfo.uid} 
                                    type={"Expenses"}
                                    bg={bgNav} 
                                    color={color} 
                                    colorMode={colorMode}
                                />
                                <Box marginTop="40px"/>
                                <DetailsTable 
                                    uid={userInfo.uid} 
                                    type={"Income"}
                                    bg={bgNav} 
                                    color={color} 
                                    colorMode={colorMode}
                                />
                                
                                <Box marginTop="40px"/>
                                <DetailsTable 
                                    uid={userInfo.uid} 
                                    type={"Totals"}
                                    bg={bgNav} 
                                    color={color} 
                                    colorMode={colorMode}
                                />
                            </Box>
                            <Box height="40px"></Box>
                        </Box>
                        
                        
                        
                    </GridItem>
                </Grid>
        
                </main>
            </Box>
        </AuthRoute>
    )
    
}

export async function getStaticProps() {
    return {
      props: {
        protected: true,
      },
    }
}

export default Overview;